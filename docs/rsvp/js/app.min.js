const form=document.getElementById("registrar"),input=form.querySelector("input"),mainDiv=document.querySelector(".main"),ul=document.getElementById("invitedList"),div=document.createElement("div"),filterLabel=document.createElement("label"),filterCheckbox=document.createElement("input"),loopNames=()=>{let e=document.querySelectorAll("li span");for(let t=0;t<e.length;t+=1){let n=e[t].textContent;if(input.value===n)return!0}},createLI=e=>{const t=(e,t,n)=>{const l=document.createElement(e);return l[t]=n,l},n=(e,n,o)=>{const r=t(e,n,o);return l.appendChild(r),r},l=document.createElement("li");return n("span","textContent",e),n("label","textContent","Confirmed").appendChild(t("input","type","checkbox")),n("button","textContent","edit"),n("button","textContent","remove"),l};filterCheckbox.addEventListener("change",e=>{const t=e.target.checked,n=ul.children;if(t)for(let e=0;e<n.length;e+=1){let t=n[e];"responded"===t.className?t.style.display="":t.style.display="none"}else for(let e=0;e<n.length;e+=1){n[e].style.display=""}}),form.addEventListener("submit",e=>{e.preventDefault();const t=input.value;if(loopNames(),""===input.value)alert("Put a name in the field");else if(loopNames())alert("Cette personne est déjà inscrite");else{const e=createLI(t);ul.appendChild(e),localStorage.setItem(e,input.value),input.value=""}}),ul.addEventListener("change",e=>{const t=event.target,n=t.checked,l=t.parentNode.parentNode;l.className=n?"responded":""}),ul.addEventListener("click",e=>{if("BUTTON"===e.target.tagName){const t=e.target,n=e.target.parentNode,l=n.parentNode;({remove:()=>{l.removeChild(n)},edit:()=>{const e=n.firstElementChild,l=document.createElement("input");l.type="text",l.value=e.textContent,n.insertBefore(l,e),n.removeChild(e),t.textContent="save"},save:()=>{const e=n.firstElementChild,l=document.createElement("span");l.textContent=e.value,n.insertBefore(l,e),n.removeChild(e),t.textContent="edit"}})[t.textContent]()}}),document.addEventListener("DOMContentLoaded",()=>{filterLabel.textContent="Hide those who haven't responded",filterCheckbox.type="checkbox",div.appendChild(filterLabel),div.appendChild(filterCheckbox),mainDiv.insertBefore(div,ul)});