const randomButton=document.getElementById("random"),input=document.getElementById("input"),go=document.getElementById("go"),loader=document.getElementById("loader"),userLang=navigator.language||navigator.userLanguage,randomUrl=`https://${userLang}.wikipedia.org/wiki/Special:Random`,list=document.getElementById("list");let url,data,results,titles=[],snippets=[];const encodeUrl=()=>{const e=encodeURIComponent(input.value);url=`https://${userLang}.wikipedia.org/w/api.php?action=query&origin=*&format=json&list=search&srsearch=${e}&utf8=`},userInterface=()=>{results.forEach(e=>{titles.push(e.title),snippets.push(e.snippet),list.innerHTML+=`<a href="https://en.wikipedia.org/wiki/${e.title}" target="_blank" class="list-group-item list-group-item-action flex-column align-items-start">\n                                <div class="d-flex w-100 justify-content-between">\n                                    <h5 class="mb-1">${e.title}</h5>\n                                </div>\n                            <p class="mb-1">${e.snippet}</p>\n                            </a>`})},request=()=>{loader.style.display="block";let e=new XMLHttpRequest;e.onreadystatechange=(()=>{4===e.readyState&&(loader.style.display="none",data=JSON.parse(e.responseText),results=data.query.search,noResults(),results.forEach(e=>{titles.push(e.title),snippets.push(e.snippet),list.innerHTML+=`<a href="https://en.wikipedia.org/wiki/${e.title}" target="_blank" class="list-group-item list-group-item-action flex-column align-items-start">\n                                <div class="d-flex w-100 justify-content-between">\n                                    <h5 class="mb-1">${e.title}</h5>\n                                </div>\n                            <p class="mb-1">${e.snippet}</p>\n                            </a>`}))}),e.open("GET",url,!0),e.send()},noResults=()=>{0===results.length&&(list.innerHTML='<em class="text-light">No results found.</em>')};randomButton.addEventListener("click",()=>{window.open(randomUrl,"_blank"),window.open(randomUrl)}),go.addEventListener("click",()=>{list.innerHTML="",lis=[],encodeUrl(),request()}),input.addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&go.click()}),list.addEventListener("click",function(e){e.node===list.child&&"A"===e.target.parentNode.nodeName&&e.target.parentNode.classList.add("active")});